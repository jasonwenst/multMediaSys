<?xml version="1.0" encoding="utf-8" ?>
<root>
    <common_config>
        <bm_sysinfo>$HOME/etc/sysinfo</bm_sysinfo>
        <bm_database_id>1</bm_database_id>
        <flow_id>-1</flow_id>
        <service_id>5</service_id>
        <proc_id>1</proc_id>
        <log>
    		<path>$LOGPATH/srm</path>
    		<file_prefix>srm</file_prefix>
    		<level>debug</level>
    		<log4j-configuration>
                <appender>
                    <name>dailyrollingfile</name>
                    <class>DailyRollingFileAppender</class>
                    <param>
                            <name>file</name>
                            <value>$LOGPATH/dbe/srm</value>
                    </param>
                    <param>
                            <name>flush_immediately</name>
                            <value>true</value>
                    </param>
                    <param>
                            <name>maxfilesize</name>
                            <value>20MB</value>
                    </param>
                    <param>
                            <name>intervalmin</name>
                            <value></value>
                    </param>
                    <param> 
                            <name>maxbackupindex</name>
                            <value>40</value>
                    </param>
                    <param>
                            <name>datepattern</name>
                            <value>yyyy-MM-dd</value>
                    </param>
                    <layout>
                            <class>DefaultLayout</class>
                    </layout>
                </appender>
                <root>
                    <priority>
                        <value>trace</value>
                    </priority>
                    <appender-ref>
                        <ref>dailyrollingfile</ref>
                    </appender-ref>
                </root>
            </log4j-configuration>
        </log>
        <debug>1</debug>
    </common_config>
    <pipe_lines>
        <pipe_line>
            <pipe_line_name>main_pipe_line</pipe_line_name>
            <pipe_line_id>1</pipe_line_id>
            <nodes>
                <node>
                    <node_id>1</node_id>
                    <node_name>tcp_server_accept</node_name>
                    <next_nodes>
                        <node>
                            <node_id>2</node_id>
                            <node_index>0</node_index>
                        </node>
                    </next_nodes>
                    <node_configs />                        
                    <functions>
                        <function>
                            <batch_id>1</batch_id>
                            <shl_lib_name>libcp_dbe_communicate_threadD</shl_lib_name>
                            <func_name>create_communicatePollServer</func_name>
                            <func_configs>
                            	<socket_server>
                            		<server_port>$SRM_PORT</server_port>
                            		<check_connection_time_step>0</check_connection_time_step>
                            		<select_time_out>20</select_time_out>
                                    <recv_time_out>0</recv_time_out>
                                    <reconnect_occassion>send</reconnect_occassion>
                                </socket_server>                            
                            </func_configs>
                        </function>
                    </functions>
                </node>
                <node>
                    <node_id>2</node_id>
        			<node_name>tcp_communicate_read</node_name>
        			<buf_upper_limit>1</buf_upper_limit>
        			<next_nodes>
        			    <node>
        			        <node_id>3</node_id>
        			        <node_index>0</node_index>
        			    </node>
        			</next_nodes>
        			<functions>
        			    <function>
        			        <batch_id>1</batch_id>
        			        <shl_lib_name>libcp_dbe2_caD</shl_lib_name>
        			        <func_name>create_dbeCommunicateRead</func_name>
        			    </function>
        			</functions>
                </node>
                <node>
                    <node_id>3</node_id>
        			<node_name>msg_dispatch</node_name>
                    <buf_size>2048</buf_size>
                    <min_thread>3</min_thread>
                    <max_thread>3</max_thread>
        			<next_nodes>
        			    <node>
        			        <node_id>4</node_id>
        			        <node_index>0</node_index>
        			    </node>
        			</next_nodes>
        			<node_configs />
        			<functions>
        			    <function>
        			        <batch_id>1</batch_id>
        			        <shl_lib_name>libcp_dbe2_msg_dispatchD</shl_lib_name>
        			        <func_name>create_dispatchInstance</func_name>
        			        <func_configs>
        			            <dispatch_lib>cp_dbe2_msg_dispatch_test</dispatch_lib>
        			        </func_configs>
        			    </function>
        			</functions>
                </node>
                <node>
                    <node_id>4</node_id>
                    <node_name>tcp_communicate_write_ca</node_name>
                    <functions>
                        <function>
                            <batch_id>1</batch_id>
                            <shl_lib_name>libcp_dbe2_caD</shl_lib_name>
                            <func_name>create_dbeCommunicateWrite</func_name>
                        </function>
                    </functions>
                </node>
                <node>
                    <node_id>5</node_id>
                    <node_name>frame_timer</node_name>
                    <next_nodes>
                        <node>
                            <node_id>3</node_id>
                            <node_index>0</node_index>
                        </node>
                    </next_nodes>
                    <functions>
                        <function>
                            <batch_id>1</batch_id>
                            <shl_lib_name>libcp_dbe2_msg_dispatchD</shl_lib_name>
                            <func_name>create_timerInstance</func_name>
        			        <func_configs>
        			            <time_list>
        			                <time_info>
            			                <time>
            			                    <time_msg_type>3001</time_msg_type>
            			                    <time_interval>1</time_interval>
            			                </time>
                                    </time_info>
                                    <time_info>
            			                <time>
            			                    <time_msg_type>3002</time_msg_type>
            			                    <time_interval>2</time_interval>
            			                </time>
                                    </time_info>
                                    <time_info>
            			                <time>
            			                    <time_msg_type>3003</time_msg_type>
            			                    <time_interval>4</time_interval>
            			                </time>
        			                </time_info>
        			            </time_list>
        			        </func_configs>
                        </function>
                    </functions>
                </node>
                <node>
                    <node_id>9</node_id>
                        <node_name>udp_server</node_name>
                        <next_nodes></next_nodes>
                        <node_configs></node_configs>
                        <functions>
                            <function>
                                <batch_id>1</batch_id>
                                <shl_lib_name>libcp_dbe2_udpD</shl_lib_name>
                                <func_name>create_caUdpInstance</func_name>
                                <func_configs>
                                    <udp_port>$UDP_PORT</udp_port>
                                </func_configs>
                            </function>
                        </functions>
                </node>
            </nodes>
        </pipe_line>
    </pipe_lines>
</root>

                                                                                                                                           
